import{t as Y,b as G}from"../chunks/8MbyhGqp.js";import{i as xe}from"../chunks/0OqX2-Em.js";import{c as ae,r as C,g as Ge,n as Ye,h as Fe,S as Ze,B as f,aa as ie,a4 as je,a5 as ce,s as re,d as U,e as ze,a6 as we,o as ye,a7 as Ke,ar as Ee,l as Ae,N as Qe,ad as Xe,Z as fe,as as se,L as Je,t as de,at as le,au as We,av as oe,aw as ve,ax as et,k as tt,ay as at,V as rt,az as st,a as nt,aA as it,aB as lt,a3 as ot,aC as ut,p as Ne,Q as y,v as A,R as x,P as ne,u as ke,w as pe,a0 as R,aD as j}from"../chunks/C06L91Cf.js";import{s as V}from"../chunks/DbaLfp5x.js";import{p as ge,i as ct}from"../chunks/CRZFhwzU.js";import{e as K,d as ft}from"../chunks/-m07VdFc.js";import{c as dt,o as vt}from"../chunks/J_iZFzCE.js";import{g as he}from"../chunks/CARBlJD-.js";function Te(r,e){return e}function pt(r,e,t,a){for(var n=[],i=e.length,s=0;s<i;s++)et(e[s].e,n,!0);var l=i>0&&n.length===0&&t!==null;if(l){var h=t.parentNode;tt(h),h.append(t),a.clear(),S(r,e[0].prev,e[i-1].next)}at(n,()=>{for(var b=0;b<i;b++){var g=e[b];l||(a.delete(g.k),S(r,g.prev,g.next)),rt(g.e,!l)}})}function Ce(r,e,t,a,n,i=null){var s=r,l={flags:e,items:new Map,first:null},h=(e&Ee)!==0;if(h){var b=r;s=C?ae(Ge(b)):b.appendChild(Ye())}C&&Fe();var g=null,T=!1,u=ie(()=>{var v=t();return Qe(v)?v:v==null?[]:Ae(v)});Ze(()=>{var v=f(u),o=v.length;if(T&&o===0)return;T=o===0;let N=!1;if(C){var w=s.data===je;w!==(o===0)&&(s=ce(),ae(s),re(!1),N=!0)}if(C){for(var E=null,k,d=0;d<o;d++){if(U.nodeType===8&&U.data===ze){s=U,N=!0,re(!1);break}var c=v[d],p=a(c,d);k=Ie(U,l,E,null,c,p,d,n,e,t),l.items.set(p,k),E=k}o>0&&ae(ce())}C||gt(v,l,s,n,e,a,t),i!==null&&(o===0?g?we(g):g=ye(()=>i(s)):g!==null&&Ke(g,()=>{g=null})),N&&re(!0),f(u)}),C&&(s=U)}function gt(r,e,t,a,n,i,s){var B,q,F,Z;var l=(n&We)!==0,h=(n&(oe|le))!==0,b=r.length,g=e.items,T=e.first,u=T,v,o=null,N,w=[],E=[],k,d,c,p;if(l)for(p=0;p<b;p+=1)k=r[p],d=i(k,p),c=g.get(d),c!==void 0&&((B=c.a)==null||B.measure(),(N??(N=new Set)).add(c));for(p=0;p<b;p+=1){if(k=r[p],d=i(k,p),c=g.get(d),c===void 0){var $=u?u.e.nodes_start:t;o=Ie($,e,o,o===null?e.first:o.next,k,d,p,a,n,s),g.set(d,o),w=[],E=[],u=o.next;continue}if(h&&ht(c,k,p,n),(c.e.f&se)!==0&&(we(c.e),l&&((q=c.a)==null||q.unfix(),(N??(N=new Set)).delete(c))),c!==u){if(v!==void 0&&v.has(c)){if(w.length<E.length){var D=E[0],m;o=D.prev;var M=w[0],L=w[w.length-1];for(m=0;m<w.length;m+=1)me(w[m],D,t);for(m=0;m<E.length;m+=1)v.delete(E[m]);S(e,M.prev,L.next),S(e,o,M),S(e,L,D),u=D,o=L,p-=1,w=[],E=[]}else v.delete(c),me(c,u,t),S(e,c.prev,c.next),S(e,c,o===null?e.first:o.next),S(e,o,c),o=c;continue}for(w=[],E=[];u!==null&&u.k!==d;)(u.e.f&se)===0&&(v??(v=new Set)).add(u),E.push(u),u=u.next;if(u===null)continue;c=u}w.push(c),o=c,u=c.next}if(u!==null||v!==void 0){for(var I=v===void 0?[]:Ae(v);u!==null;)(u.e.f&se)===0&&I.push(u),u=u.next;var P=I.length;if(P>0){var O=(n&Ee)!==0&&b===0?t:null;if(l){for(p=0;p<P;p+=1)(F=I[p].a)==null||F.measure();for(p=0;p<P;p+=1)(Z=I[p].a)==null||Z.fix()}pt(e,I,O,g)}}l&&Je(()=>{var H;if(N!==void 0)for(c of N)(H=c.a)==null||H.apply()}),de.first=e.first&&e.first.e,de.last=o&&o.e}function ht(r,e,t,a){(a&oe)!==0&&ve(r.v,e),(a&le)!==0?ve(r.i,t):r.i=t}function Ie(r,e,t,a,n,i,s,l,h,b){var g=(h&oe)!==0,T=(h&st)===0,u=g?T?Xe(n):fe(n):n,v=(h&le)===0?s:fe(s),o={i:v,v:u,k:i,a:null,e:null,prev:t,next:a};try{return o.e=ye(()=>l(r,u,v,b),C),o.e.prev=t&&t.e,o.e.next=a&&a.e,t===null?e.first=o:(t.next=o,t.e.next=o.e),a!==null&&(a.prev=o,a.e.prev=o.e),o}finally{}}function me(r,e,t){for(var a=r.next?r.next.e.nodes_start:t,n=e?e.e.nodes_start:t,i=r.e.nodes_start;i!==a;){var s=nt(i);n.before(i),i=s}}function S(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const be=[...` 	
\r\fÂ \v\uFEFF`];function mt(r,e,t){var a=r==null?"":""+r;if(e&&(a=a?a+" "+e:e),t){for(var n in t)if(t[n])a=a?a+" "+n:n;else if(a.length)for(var i=n.length,s=0;(s=a.indexOf(n,s))>=0;){var l=s+i;(s===0||be.includes(a[s-1]))&&(l===a.length||be.includes(a[l]))?a=(s===0?"":a.substring(0,s))+a.substring(l+1):s=l}}return a===""?null:a}function Q(r,e,t,a,n,i){var s=r.__className;if(C||s!==t){var l=mt(t,a,i);(!C||l!==r.getAttribute("class"))&&(l==null?r.removeAttribute("class"):r.className=l),r.__className=t}else if(i&&n!==i)for(var h in i){var b=!!i[h];(n==null||b!==!!n[h])&&r.classList.toggle(h,b)}return i}const bt=Symbol("is custom element"),_t=Symbol("is html");function z(r,e,t,a){var n=xt(r);C&&(n[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||n[e]!==(n[e]=t)&&(e==="loading"&&(r[it]=t),t==null?r.removeAttribute(e):typeof t!="string"&&wt(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function xt(r){return r.__attributes??(r.__attributes={[bt]:r.nodeName.includes("-"),[_t]:r.namespaceURI===lt})}var _e=new Map;function wt(r){var e=_e.get(r.nodeName);if(e)return e;_e.set(r.nodeName,e=[]);for(var t,a=r,n=Element.prototype;n!==a;){t=ut(a);for(var i in t)t[i].set&&e.push(i);a=ot(a)}return e}var yt=Y("<button></button>"),Et=Y('<div class="mt-4 flex justify-center"><button class="mx-1 rounded bg-gray-200 px-3 py-2 hover:bg-gray-300 disabled:opacity-50 svelte-11c2e98">Previous</button> <!> <button class="mx-1 rounded bg-gray-200 px-3 py-2 hover:bg-gray-300 disabled:opacity-50 svelte-11c2e98">Next</button></div>');function At(r,e){Ne(e,!1);let t=ge(e,"currentPage",12,1),a=ge(e,"totalPages",8,1);const n=g=>{g>=1&&g<=a()&&(t(g),i("pageChange",{page:g}))},i=dt();xe();var s=Et(),l=y(s),h=A(l,2);Ce(h,1,()=>Array(a()),Te,(g,T,u)=>{var v=yt();let o;v.textContent=u+1,ne(N=>o=Q(v,1,"mx-1 rounded px-3 py-2 svelte-11c2e98",null,o,N),[()=>({"bg-blue-500":t()===u+1,"text-white":t()===u+1,"bg-gray-200":t()!==u+1,"hover:bg-gray-300":t()!==u+1})],ie),K("click",v,()=>n(u+1)),G(g,v)});var b=A(h,2);x(s),ne(()=>{l.disabled=t()===1,b.disabled=t()===a()}),K("click",l,()=>n(t()-1)),K("click",b,()=>n(t()+1)),G(r,s),ke()}var Nt=Y('<div class="flip-container svelte-t3p5ok"><article><div><img class="h-64 w-full object-cover"> <div class="flex flex-col items-center p-4"><h2 class="mb-2 text-center text-lg font-semibold"> </h2> <button class="mt-auto cursor-pointer rounded-lg bg-blue-600 px-4 py-2 text-white transition hover:bg-blue-700">Shuffle</button></div></div> <div><img class="h-64 w-full object-cover"> <div class="flex flex-col items-center p-4"><h2 class="mb-2 text-center text-lg font-semibold"> </h2> <p class="px-2 text-center text-sm"> </p> <p class="px-2 text-center text-sm"> </p> <p class="px-2 text-center text-sm"> </p> <button class="mt-auto cursor-pointer rounded-lg bg-blue-600 px-4 py-2 text-white transition hover:bg-blue-700">Start Over</button></div></div></article></div>'),kt=Y('<div class="grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"></div> <!>',1),Tt=Y('<section><div class="flex justify-center"><h1>Bramble Scramble!</h1></div></section> <section class="m-4"><div class="flex justify-items-stretch"><form class="grow"><label for="default-search" class="sr-only mb-2 text-sm font-medium text-gray-900 dark:text-white">Search</label> <div class="relative grow"><div class="pointer-events-none absolute inset-y-0 start-0 flex items-center ps-3"><svg class="h-4 w-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"></path></svg></div> <input type="search" name="query" class="block w-full rounded-lg border border-gray-300 bg-gray-50 p-4 ps-10 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500" placeholder="Search for TV shows..." required> <button type="submit" class="absolute bottom-2.5 end-2.5 rounded-lg bg-blue-700 px-4 py-2 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Search</button></div></form></div></section> <section class="m-4"><!></section>',1);function Dt(r,e){Ne(e,!1);let t=j(),a=j(1),n=10,i="",s=j(new Map),l=j(new Map);vt(()=>{const d=new URLSearchParams(window.location.search);i=d.get("query")||"",R(a,parseInt(d.get("page")||"1",10)),i&&h()});async function h(){if(!i)return;const d=await fetch(`/api/tv/search?query=${i}&pageNumber=${f(a)}`,{method:"GET",headers:{"x-api-key":"c17b242a-ab82-45e9-9ca0-8a79474f875e"}});R(t,await d.json())}async function b(d){d.preventDefault(),R(s,new Map),R(l,new Map),i=new FormData(d.currentTarget).get("query"),R(a,1),he(`?query=${encodeURIComponent(i)}&page=${f(a)}`,{replaceState:!0}),h()}const g=d=>{R(a,d.detail.page),he(`?query=${encodeURIComponent(i)}&page=${f(a)}`,{replaceState:!0}),h()};async function T(d,c){const $=await(await fetch(`/api/tv/random-episode?seriesId=${c}`,{method:"GET",headers:{"x-api-key":"c17b242a-ab82-45e9-9ca0-8a79474f875e"}})).json();$.data!=null&&(f(l).set(c,$.data),R(l,new Map(f(l))),f(s).set(d,!f(s).get(d)),R(s,new Map(f(s)))),console.log(f(l).get(c))}xe();var u=Tt(),v=A(pe(u),2),o=y(v),N=y(o);x(o),x(v);var w=A(v,2),E=y(w);{var k=d=>{var c=kt(),p=pe(c);Ce(p,5,()=>f(t).data.results,Te,(D,m,M)=>{var L=Nt(),I=y(L),P=y(I),O=y(P),B=A(O,2),q=y(B),F=y(q,!0);x(q);var Z=A(q,2);Z.__click=()=>T(M,f(m).id),x(B),x(P);var H=A(P,2),X=y(H),ue=A(X,2),J=y(ue),Me=y(J,!0);x(J);var W=A(J,2),Pe=y(W);x(W);var ee=A(W,2),Re=y(ee);x(ee);var te=A(ee,2),Se=y(te,!0);x(te);var Le=A(te,2);Le.__click=()=>T(M,f(m).id),x(ue),x(H),x(I),x(L),ne((_,$e,De,qe,He,Oe,Be,Ue,Ve)=>{Q(I,1,`flipper ${_??""}`,"svelte-t3p5ok"),Q(P,1,`front overflow-hidden rounded-lg bg-white shadow-lg ${$e??""}`,"svelte-t3p5ok"),z(O,"alt",f(m).name),z(O,"src",f(m).posterPath?"https://image.tmdb.org/t/p/w500"+f(m).posterPath:"https://placehold.co/600x400?text=No\\nImage"),V(F,f(m).name),Q(H,1,`back overflow-hidden rounded-lg bg-white shadow-lg ${De??""}`,"svelte-t3p5ok"),z(X,"alt",qe),z(X,"src",He),V(Me,Oe),V(Pe,`Season Number: ${Be??""}`),V(Re,`Episode Number: ${Ue??""}`),V(Se,Ve)},[()=>f(s).get(M)?"flipped":"",()=>f(s).get(M)?"hidden":"visible",()=>f(s).get(M)?"visible":"hidden",()=>{var _;return(_=f(l).get(f(m).id))==null?void 0:_.name},()=>{var _;return"https://image.tmdb.org/t/p/w500"+((_=f(l).get(f(m).id))==null?void 0:_.imagePath)},()=>{var _;return(_=f(l).get(f(m).id))==null?void 0:_.name},()=>{var _;return(_=f(l).get(f(m).id))==null?void 0:_.season},()=>{var _;return(_=f(l).get(f(m).id))==null?void 0:_.episode},()=>{var _;return(_=f(l).get(f(m).id))==null?void 0:_.overview}],ie),G(D,L)}),x(p);var $=A(p,2);At($,{get currentPage(){return f(a)},totalPages:n,$$events:{pageChange:g}}),G(d,c)};ct(E,d=>{f(t)!=null&&f(t).data!=null&&d(k)})}x(w),K("submit",N,b),G(r,u),ke()}ft(["click"]);export{Dt as component};
